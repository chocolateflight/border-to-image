* { box-sizing: border-box; }
body {
  background: #f9f9f9;
  color: #333;
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 1rem;
}
.container {
  max-width: 1200px;
  margin: 0 auto;
}
h1 {
  text-align: center;
  margin-bottom: 1rem;
}

/* --- Mode Toggle Switch --- */
.mode-toggle-container {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 0.8rem; /* Space between elements */
  margin-bottom: 1.5rem; /* Space below toggle */
  padding: 0.5rem;
  /* Removed background-color */
  border-radius: 4px;
}
.mode-label {
    font-size: 0.95rem;
    color: #555;
}
/* The switch - the box around the slider */
.toggle-switch {
  position: relative;
  display: inline-block;
  width: 50px; /* Width of the switch */
  height: 28px; /* Height of the switch */
}
/* Hide default HTML checkbox */
.toggle-switch input {
  opacity: 0;
  width: 0;
  height: 0;
}
/* The slider */
.toggle-slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  transition: .3s; /* Animation speed */
}
.toggle-slider:before {
  position: absolute;
  content: "";
  height: 20px; /* Height of the handle */
  width: 20px; /* Width of the handle */
  left: 4px; /* Position from left */
  bottom: 4px; /* Position from bottom */
  background-color: white;
  transition: .3s; /* Animation speed */
}
/* Rounded sliders */
.toggle-slider.round {
  border-radius: 28px; /* Make track round */
}
.toggle-slider.round:before {
  border-radius: 50%; /* Make handle round */
}
/* Handle movement and color change when checked */
input:checked + .toggle-slider {
  background-color: #007BFF; /* Active color */
}
input:checked + .toggle-slider:before {
  transform: translateX(22px); /* Move handle to the right */
}
/* --- End Mode Toggle Switch --- */


#controls {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1rem;
  margin-bottom: 1.5rem;
}
fieldset {
  border: 1px solid #ddd;
  border-radius: 4px;
  padding: 1rem;
  background: #fff;
}
legend { font-weight: bold; padding: 0 0.5rem; margin-bottom: 1rem; }

/* Default Label styling */
label {
  display: block;
  margin-bottom: 0.25rem;
  font-size: 0.9rem;
  font-weight: bold;
}

/* General Input/Select/Button */
input[type="text"],
input[type="number"],
input[type="color"],
input[type="file"],
select,
button {
  display: block;
  width: 100%;
  padding: 0.5rem;
  margin-top: 0.25rem;
  margin-bottom: 0.75rem;
  font-size: 1rem;
  border: 1px solid #ccc;
  border-radius: 4px;
}
input[type="color"] { height: 2.5rem; padding: 0.2rem; }
input[type="number"] { width: 8em; }
input[type="range"] { width: 100%; margin-top: 0; padding: 0;}
select { margin-bottom: 1rem; }


/* Grouping for Width Label + Unit Toggle */
.width-label-group {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
}
.width-label-group label { margin-bottom: 0; }
.width-unit-toggle { font-size: 0.9rem; white-space: nowrap; }
.width-unit-toggle span { margin-right: 0.5em; font-weight: normal; }
.unit-btn {
  display: inline-block;
  width: auto;
  padding: 0.2rem 0.5rem;
  font-size: 0.8rem;
  margin: 0 0.1rem;
  background-color: #eee;
  color: #333;
  border: 1px solid #ccc;
  cursor: pointer;
  border-radius: 3px;
  vertical-align: middle;
}
.unit-btn.active { background-color: #007BFF; color: white; border-color: #0056b3; }
.unit-btn:not(.active):hover { background-color: #ddd; }


/* Simple Controls Layout */
.simple-controls { margin-bottom: 0.75rem; }
.sliderGroup {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-bottom: 0.5rem;
}
.sliderGroup input[type="range"] { flex-grow: 1; }
.valDisplay {
  font-weight: bold;
  min-width: 2.5em;
  text-align: center;
  background-color: #f0f0f0;
  padding: 0.3rem 0.5rem;
  border-radius: 3px;
  font-size: 0.9rem;
}
.simple-controls input[type="number"] { margin-top: 0; }

/* Advanced Controls Layout */
.advanced-controls {
  display: none; /* CORRECT: Hide by default */
  border-top: 1px dashed #ccc;
  margin-top: 1rem;
  padding-top: 1rem;
  /* REMOVED display: grid; from here */
  grid-template-columns: auto 1fr; /* Define grid structure */
  gap: 0.6rem 1rem;
  align-items: center;
}
.advanced-controls label {
    grid-column: 1 / 2;
    margin: 0;
    padding: 0;
    text-align: right;
    font-size: 0.9rem;
    font-weight: normal;
}
.advanced-controls input[type="number"] {
    grid-column: 2 / 3;
    width: 100%;
    margin: 0;
    margin-bottom: 0;
}


/* Visibility Toggle */
.advanced-mode-active .simple-controls { display: none; }
/* This rule correctly applies display: grid only when advanced mode is active */
.advanced-mode-active .advanced-controls { display: grid; }

/* Unit Label Styling */
.unit-label { font-size: 0.8em; opacity: 0.8; margin-left: 0.2em; }

/* Buttons */
button {
  background: #007BFF; color: #fff;
  cursor: pointer; transition: background 0.2s;
  margin-top: 1rem;
}
button:disabled { opacity: 0.6; cursor: not-allowed; }
button:not(:disabled):hover { background: #0056b3; }
#btnRow { display: flex; gap: 0.5rem; margin-top: 1rem; margin-bottom: 0; }
#btnRow button { margin-top: 0; }

/* Canvas Area */
#canvasWrapper {
  background: #ddd; padding: 1rem;
  border-radius: 4px; overflow: auto;
  text-align: center;
  margin-top: 1.5rem;
}
#photoCanvas {
  max-width: 100%; max-height: 70vh;
  width: auto; height: auto;
  border: 1px solid #ccc; border-radius: 4px;
  display: block;
  margin: 0 auto;
}

/* Footer Styles */
footer {
  text-align: center;
  margin-top: 2.5rem; /* Space above the footer */
  padding: 1.5rem 1rem; /* Padding top/bottom and left/right */
  border-top: 1px solid #ddd; /* Subtle separator line */
  width: 100%; /* Ensure it takes full width */
}

footer a {
  color: #007BFF; /* Use theme blue color */
  text-decoration: none;
  font-size: 0.9rem;
  transition: color 0.2s ease-in-out;
}

footer a:hover,
footer a:focus { /* Added focus style for accessibility */
  color: #0056b3; /* Darker blue on hover/focus */
  text-decoration: underline;
}
